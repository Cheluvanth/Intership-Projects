##### -- CRIME RECORD \& INVESTIGATION DATABASE 



###### -- 1. OFFICERS Table

###### -- Stores details of investigating officers.



CREATE TABLE Officers (

&nbsp;   officer\_id INT PRIMARY KEY,

&nbsp;   first\_name VARCHAR(100) NOT NULL,

&nbsp;   last\_name VARCHAR(100) NOT NULL,

&nbsp;   rank VARCHAR(50) NOT NULL,

&nbsp;   badge\_number VARCHAR(20) UNIQUE NOT NULL

);





###### Inserting data





INSERT ALL

&nbsp;   INTO Officers (officer\_id, first\_name, last\_name, rank, badge\_number)

&nbsp;       VALUES (101, 'Olivia', 'Benson', 'Captain', 'A101')

&nbsp;   INTO Officers (officer\_id, first\_name, last\_name, rank, badge\_number)

&nbsp;       VALUES (102, 'Elliot', 'Stabler', 'Detective', 'B202')

&nbsp;   INTO Officers (officer\_id, first\_name, last\_name, rank, badge\_number)

&nbsp;       VALUES (103, 'Amanda', 'Rollins', 'Detective', 'C303')

SELECT \* FROM dual;





###### -- 2. SUSPECTS Table

###### -- Stores details of individuals associated as suspects in cases.

###### 

CREATE TABLE Suspects (

&nbsp;   suspect\_id INT PRIMARY KEY,

&nbsp;   name VARCHAR(255) NOT NULL,

&nbsp;   date\_of\_birth DATE,

&nbsp;   address VARCHAR(255),

&nbsp;   fingerprint\_hash VARCHAR(128) UNIQUE

);





###### Inserting data





INSERT ALL

&nbsp;   INTO Suspects (suspect\_id, name, date\_of\_birth, address)

&nbsp;       VALUES (201, 'Victor Krum', TO\_DATE('1985-05-15', 'YYYY-MM-DD'), '123 Grimmauld Pl')

&nbsp;   INTO Suspects (suspect\_id, name, date\_of\_birth, address)

&nbsp;       VALUES (202, 'Luna Lovegood', TO\_DATE('1990-02-02', 'YYYY-MM-DD'), 'The Rookery, Ottery St Catchpole')

&nbsp;   INTO Suspects (suspect\_id, name, date\_of\_birth, address)

&nbsp;       VALUES (203, 'Severus Snape', TO\_DATE('1960-01-09', 'YYYY-MM-DD'), 'Spinner''s End')

SELECT \* FROM dual;





###### -- 3. CASES Table

###### -- The central table for all criminal cases.



CREATE TABLE Cases (

&nbsp;   case\_id VARCHAR2(50) PRIMARY KEY, -- VARCHAR2 is standard in Oracle

&nbsp;   title VARCHAR2(255) NOT NULL,

&nbsp;   description CLOB,

&nbsp;   date\_opened DATE NOT NULL,

&nbsp;   date\_closed DATE,

&nbsp;   status VARCHAR2(50) NOT NULL CHECK (status IN ('OPEN', 'SOLVED', 'UNSOLVED', 'ARCHIVED')),

&nbsp;   lead\_officer\_id NUMBER,

&nbsp;   FOREIGN KEY (lead\_officer\_id) REFERENCES Officers(officer\_id)

);





###### Inserting data





INSERT ALL

&nbsp;   INTO Cases (case\_id, title, description, date\_opened, date\_closed, status, lead\_officer\_id)

&nbsp;       VALUES ('H-401', 'Missing Artifacts at Museum', 'High-profile theft of historical items.', TO\_DATE('2023-10-01', 'YYYY-MM-DD'), NULL, 'OPEN', 101)

&nbsp;   INTO Cases (case\_id, title, description, date\_opened, date\_closed, status, lead\_officer\_id)

&nbsp;       VALUES ('M-522', 'Cyber Extortion Ring', 'Investigation into a major data breach.', TO\_DATE('2023-08-15', 'YYYY-MM-DD'), TO\_DATE('2023-10-20', 'YYYY-MM-DD'), 'SOLVED', 102)

&nbsp;   INTO Cases (case\_id, title, description, date\_opened, date\_closed, status, lead\_officer\_id)

&nbsp;       VALUES ('A-611', 'Unidentified Vandalism Spree', 'Series of related property damages across districts.', TO\_DATE('2023-09-01', 'YYYY-MM-DD'), NULL, 'UNSOLVED', 103)

&nbsp;   INTO Cases (case\_id, title, description, date\_opened, date\_closed, status, lead\_officer\_id)

&nbsp;       VALUES ('B-700', 'Cold Case: 1999 Robbery', 'Review of a bank robbery from 1999.', TO\_DATE('2023-01-05', 'YYYY-MM-DD'), TO\_DATE('2023-05-01', 'YYYY-MM-DD'), 'ARCHIVED', 101)

SELECT \* FROM dual;





###### -- Linking table for Suspects and Cases (Many-to-Many relationship)



CREATE TABLE CaseSuspects (

&nbsp;   case\_id VARCHAR(50) REFERENCES Cases(case\_id),

&nbsp;   suspect\_id INT REFERENCES Suspects(suspect\_id),

&nbsp;   role VARCHAR(100), -- e.g., 'Primary Suspect', 'Person of Interest'

&nbsp;   PRIMARY KEY (case\_id, suspect\_id)

);





###### Inserting data





INSERT ALL

&nbsp;   INTO CaseSuspects (case\_id, suspect\_id, role)

&nbsp;       VALUES ('H-401', 201, 'Primary Suspect')

&nbsp;   INTO CaseSuspects (case\_id, suspect\_id, role)

&nbsp;       VALUES ('M-522', 202, 'Witness')

&nbsp;   INTO CaseSuspects (case\_id, suspect\_id, role)

&nbsp;       VALUES ('M-522', 203, 'Convicted')

SELECT \* FROM dual;





###### -- 4. EVIDENCE Table

###### -- Tracks physical or digital items collected for a case and their chain of custody.



CREATE TABLE Evidence (

&nbsp;   evidence\_id NUMBER PRIMARY KEY,

&nbsp;   case\_id VARCHAR2(50) NOT NULL,

&nbsp;   description CLOB NOT NULL,

&nbsp;   collection\_date TIMESTAMP NOT NULL,

&nbsp;   location\_found VARCHAR2(255),

&nbsp;   current\_custodian\_id NUMBER NOT NULL,

&nbsp;   storage\_location VARCHAR2(255),

&nbsp;   FOREIGN KEY (case\_id) REFERENCES Cases(case\_id),

&nbsp;   FOREIGN KEY (current\_custodian\_id) REFERENCES Officers(officer\_id)

);





###### Inserting data





INSERT ALL

&nbsp;   INTO Evidence (evidence\_id, case\_id, description, collection\_date, location\_found, current\_custodian\_id, storage\_location)

&nbsp;       VALUES (301, 'H-401', 'Security camera footage from North Wing', TO\_TIMESTAMP('2023-10-02 10:00:00', 'YYYY-MM-DD HH24:MI:SS'), 'Museum CCTV room', 101, 'Digital Server C-1')

&nbsp;   INTO Evidence (evidence\_id, case\_id, description, collection\_date, location\_found, current\_custodian\_id, storage\_location)

&nbsp;       VALUES (302, 'M-522', 'Encrypted hard drive', TO\_TIMESTAMP('2023-08-16 14:30:00', 'YYYY-MM-DD HH24:MI:SS'), 'Suspects apartment', 102, 'Evidence Locker 5')

&nbsp;   INTO Evidence (evidence\_id, case\_id, description, collection\_date, location\_found, current\_custodian\_id, storage\_location)

&nbsp;       VALUES (303, 'A-611', 'Graffiti spray can', TO\_TIMESTAMP('2023-09-01 19:00:00', 'YYYY-MM-DD HH24:MI:SS'), 'Park dumpster', 103, 'Evidence Locker 10')

SELECT \* FROM dual;







###### -- 5. EvidenceAudit Table (Used for the Trigger)

###### -- Logs every change in the custodian of an evidence item.



CREATE TABLE EvidenceAudit (

&nbsp;   audit\_id NUMBER PRIMARY KEY,

&nbsp;   evidence\_id NUMBER NOT NULL,

&nbsp;   previous\_custodian\_id NUMBER,

&nbsp;   new\_custodian\_id NUMBER NOT NULL,

&nbsp;   change\_timestamp TIMESTAMP DEFAULT CURRENT\_TIMESTAMP,

&nbsp;   log\_message VARCHAR2(255),

&nbsp;   FOREIGN KEY (evidence\_id) REFERENCES Evidence(evidence\_id),

&nbsp;   FOREIGN KEY (previous\_custodian\_id) REFERENCES Officers(officer\_id),

&nbsp;   FOREIGN KEY (new\_custodian\_id) REFERENCES Officers(officer\_id)

);





###### -- Create sequence for auto-increment



CREATE SEQUENCE audit\_seq START WITH 1 INCREMENT BY 1;





###### -- Create trigger to use the sequence



CREATE OR REPLACE TRIGGER trg\_audit\_id

BEFORE INSERT ON EvidenceAudit

FOR EACH ROW

BEGIN

&nbsp;   SELECT audit\_seq.NEXTVAL INTO :NEW.audit\_id FROM dual;

END;







